---
- name: Assign the block zone to the default interface
  ansible.posix.firewalld:
    zone: block
    interface: "{{ ansible_facts.default_ipv4.interface }}"
    state: enabled
    permanent: true
  become: true
  notify: Reload Firewalld

- name: Allow forwarding in the block zone
  ansible.posix.firewalld:
    zone: block
    forward: true
    state: enabled
    permanent: true
  become: true
  notify: Reload Firewalld

- name: Allow masquerading in the block zone
  ansible.posix.firewalld:
    zone: block
    masquerade: true
    state: enabled
    permanent: true
  become: true
  notify: Reload Firewalld
