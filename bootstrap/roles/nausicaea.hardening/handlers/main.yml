---
- name: Update GRUB
  ansible.builtin.command:
    argv:
      - update-grub
  changed_when: true
  become: true

- name: Reload Firewalld
  ansible.builtin.stat:
    path: /run/dbus/system-bus-socket
  register: dbus_socket
  failed_when: false
  changed_when: dbus_socket.stat is defined and dbus_socket.stat.exists
  notify: Reload Firewalld Stage 2
  become: true

- name: Reload Firewalld Stage 2
  ansible.builtin.command:
    argv:
      - firewall-cmd
      - "--reload"
  changed_when: true
  become: true

